{% extends "base.html" %}
{% block title %}Investigate â€¢ Darkweb Search{% endblock %}
{% block content %}
<div class="header"><div class="logo">ğŸ” ONION INVESTIGATION</div></div>
<a href="{% url 'home' %}" class="btn btn-ghost">â† Back To Home</a>
<div class="card" style="margin-top:16px">
  <h2 class="card-title">Target Information</h2>
  <div class="table" style="border:none;box-shadow:none">
    <table>
      <tbody>
        <tr><th style="width:180px">URL</th><td class="url">{{ link.url }}</td></tr>
        {% if link.title %}<tr><th>Title</th><td>{{ link.title }}</td></tr>{% endif %}
        {% if link.description %}<tr><th>Description</th><td>{{ link.description }}</td></tr>{% endif %}
        <tr><th>Status</th><td>{{ link.status|upper }} ({{ link.status_code }})</td></tr>
      </tbody>
    </table>
  </div>
</div>
{% if existing_investigation %}
<div class="card">
  <div class="card-title">âœ“ Previous Investigation Found</div>
  <div style="color:var(--text-secondary)">Last investigated: {{ existing_investigation.created_at|date:"Y-m-d H:i:s" }}</div>
  <div class="stats-grid" style="margin-top:14px">
    <div class="stat-card"><div class="stat-number">{{ existing_investigation.emails|length }}</div><div class="stat-label">Emails</div></div>
    <div class="stat-card"><div class="stat-number">{{ existing_investigation.btc_addresses|length }}</div><div class="stat-label">BTC</div></div>
    <div class="stat-card"><div class="stat-number">{{ existing_investigation.monero_addresses|length }}</div><div class="stat-label">Monero</div></div>
    <div class="stat-card"><div class="stat-number">{{ existing_investigation.ethereum_addresses|length }}</div><div class="stat-label">Ethereum</div></div>
  </div>
  <div style="margin-top:12px"><a href="{% url 'investigation_detail' existing_investigation.id %}" class="btn btn-secondary">ğŸ“ˆ View Previous Results</a></div>
</div>
{% endif %}
<div class="notice info">This investigation extracts: emails, BTC, XMR, ETH addresses, external links, and server status (if available). It may take 30â€“60 seconds.</div>
<form method="POST" onsubmit="return confirm('Start investigation? This may take up to 60 seconds.')" style="margin-top:14px">
  {% csrf_token %}
  <button type="submit" class="btn btn-primary">Start Investigation</button>
</form>
{% endblock %}

